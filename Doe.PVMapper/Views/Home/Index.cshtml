@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
    <div class="content-wrapper">
        <hgroup class="title">
            <h1>@ViewBag.Title.</h1>
            <h2>@ViewBag.Message</h2>
        </hgroup>
    </div>
</section>
}
<section>
    @using (Html.BeginForm())
    {
    @Html.TextBox("ToolTextBox", "http://dl.dropbox.com/u/298544/pvmapper/LayersTool.js")
    <input type="submit" value="Install Tool" />
    }
</section>
<div id="map">
</div>

<script src="../../Content/OpenLayers.js" type="text/javascript"></script>
@*<script src="http://openlayers.org/api/OpenLayers.js"></script>*@
<script defer="defer" type="text/javascript">
    // http://openlayers.org/dev/examples/web-mercator.html
    //900913
    //102113
    var options = {
        projection: new OpenLayers.Projection("EPSG:900913"),
        units: "m",
        numZoomLevels: 18,
        maxResolution: 156543.0339,
        maxExtent: new OpenLayers.Bounds(-20037508, -20037508,
                                         20037508, 20037508.34)
    };
    map = new OpenLayers.Map('map', options);
    var wms = new OpenLayers.Layer.WMS("OpenLayers WMS",
            "http://vmap0.tiles.osgeo.org/wms/vmap0", { layers: 'basic' });

    var solar = new OpenLayers.Layer.WMS(
        "Solar Radiation",
        "http://mapsdb.nrel.gov/jw_router/perezANN_mod/tile",
        {
            layers: "perezANN_mod",
            layer_type: "polygon",
            transparent: "true",
            format: "image/gif",
            exceptions: "application/vnd.ogc.se_inimage"
        },
        { isBaseLayer: false }
        );

    // create WMS layer
    var slope = new OpenLayers.Layer.WMS(
        "Slope",
        "http://mapsdb.nrel.gov/jw_router/DNI_slope_3/tile",
        { layers: "DNI_slope_3", format: "image/gif", transparent: "true" },
        {
            isBaseLayer: false,
            wrapDateLine: true
        }
    );


    map.addLayers([wms, solar, slope]);
    map.setCenter(new OpenLayers.LonLat(-10723197, 4500612), 3);
</script>
<script defer="defer" src="@ViewBag.ToolUrl" type="text/javascript"></script>

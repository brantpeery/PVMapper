<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Hierarchial Decision Set Weighting</title>
    <link rel="stylesheet" type="text/css" href="../Content/themes/ui-lightness/jquery-ui-1.8.21.custom.css" />
    <link rel="stylesheet" type="text/css" href="../Scripts/jQueryExtentions/themes/classic/style.css" />
    <script type="text/javascript" src="../Scripts/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-ui-1.8.22.min.js"></script>
    <script type="text/javascript" src="../Scripts/jQueryExtentions/jquery.jstree.js"></script>
    <link rel="stylesheet" type="text/css" href="../Scripts/jQueryExtentions/jquery.treeview.css" />
    <script type="text/javascript" src="../Scripts/jQueryExtentions/jquery.treeview.js"></script>

    <script type="text/javascript">
        $().ready(function () {
            $("ul.toolHierarchy").treeview({
                animated: "fast",
                collapsed: true,
                unique: true,
                //persist: "cookie"
            });

            $("li input").on("change", function (event) {
                $elem = $(event.target);

                updateParentBranch($elem.closest("li"));
            });

            function updateParentBranch(element) {
                var $e = $(element);
                var $p = $e.parent().closest("li"); //Get the parent node

                if ($e.has("ul")) {
                    var val = (parseInt($e.find("input:first").val()) || 0);

                    //Get all the li
                    $e.siblings("li").find("input:first").each(function (idx, elem) {
                        var i = parseInt(elem.value);
                        val += (i) ? i : 0;
                    })

                    
                    var $x = $p.find(".totalBranchValue").first();
                    if (val != 100) { $x.addClass("invalid-value"); }
                    else { $x.removeClass("invalid-value"); }

                    
                    $x.html(val);
                }
            };

            $("<div></div>").insertAfter("input.slider")
            .slider({
                "create": function (event, ui) {
                    $(this).slider("value", $(this).prev("input.slider").val());
                }
            })
            .on("slide", function (event, ui) {
                $(event.target).prev("input.slider").val(ui.value).change();
            }).css({ "width": 300, display: "inline-block" });

            $("p, div").css("display", "inline-block");
            //$("input").hide();

            $("li:not(li:has(li))").addClass("leaf");

            $("ul.toolHierarchy li").each(function (idx, elem) { updateParentBranch(elem) });


        });

    </script>

    <style type="text/css">
        div
        {
            margin-left: 20px;
        }

        input
        {
            width: 50px;
            margin-left: 2px;
        }

        span.label
        {
            font-size: 75%;
            padding: 0 2px 0 10px;
        }

        p
        {
            position: absolute;
            left: 230px;
            top: -.9em;
        }

        li
        {
            position: relative;
        }

        .invalid-value
        {
            color: red;
        }
    </style>



</head>
<body>
    <ul class="toolHierarchy">
        <li>Cost <span class="totalBranchValue"></span>
            <p><span class="label">Weight</span><input class="slider" type="text" /></p>
            <ul>
                <li><a href="#">Land Cost</a><span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                    <ul>
                        <li>Site Area<span class="totalBranchValue"></span>
                            <p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                        <li>Offset Area<span class="totalBranchValue"></span><span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                        <li>Zone Type<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                    </ul>
                </li>
                <li>Facility Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                    <ul>
                        <li>Solar Panel System Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" value="0" /></p>
                        </li>
                        <li>Buildings<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                        <li>Physical Security<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                    </ul>
                </li>

                <li>Transmission Connection Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                    <ul>
                        <li>Right of Way Lease Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                        <li>Transmission Line Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                        <li>Terminating Equipment Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                        </li>
                    </ul>
                </li>

                <li>Permitting Cost<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>

            </ul>
        </li>
        <li>Energy
            <span class="totalBranchValue"></span>
            <p><span class="label">Weight</span><input class="slider" type="text" /></p>
            <ul>
                <li>Power Output MW<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Intermitancy<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Power Purchase Contract Risk<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
            </ul>

        </li>
        <li>Environment
            <span class="totalBranchValue"></span>
            <p><span class="label">Weight</span><input class="slider" type="text" /></p>
            <ul>
                <li>Endangered Species<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Water Quality<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Air Emissions<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Viewshed<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
            </ul>
        </li>
        <li>Social
            <span class="totalBranchValue"></span>
            <p><span class="label">Weight</span><input class="slider" type="text" /></p>
            <ul>
                <li>Public Acceptablitiy Risk<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
                <li>Housing Proximity<span class="totalBranchValue"></span><p><span class="label">Weight</span><input class="slider" type="text" /></p>
                </li>
            </ul>
        </li>
    </ul>

</body>
</html>

var INLModules;(function(){function u(){n=new OpenLayers.Layer.WMS("Land Management",r,{layers:"1",format:"gif",srs:"3857",transparent:"true"},{isBaseLayer:!1}),n.setOpacity(.3),n.epsgOverride="3857",n.setVisibility(!1),pvMapper.map.addLayer(n)}function f(){pvMapper.map.removeLayer(n,!1)}function e(n){var t={mapExtent:n.site.geometry.bounds.toBBOX(6,!1),geometryType:"esriGeometryEnvelope",geometry:n.site.geometry.bounds.toBBOX(6,!1),f:"json",layers:"1",tolerance:0,imageDisplay:"1, 1, 96"},r=OpenLayers.Request.GET({url:i+"identify",proxy:"/Proxy/proxy.ashx?",params:t,callback:function(t){var f,i,r;if(t.status===200)if(f=new OpenLayers.Format.JSON,f.extractAttributes=!0,i=f.read(t.responseText),i&&i.results)if(i.results.length>0){var e="",o=null,c=0;for(r=0;r<i.results.length;r++){var u=i.results[r].value,s=i.results[r].attributes["Feature Type"],h=i.results[r].attributes["SMA Code"];s&&s!="Null"?u+=" ("+s+")":h&&h!="Null"&&(u+=" ("+h+")"),u!=o&&(o!=null&&(e+=", \n"),e+=u,c++),o=u}n.popupMessage=e,n.updateValue(c)}else n.popupMessage="None",n.updateValue(0);else n.popupMessage="Parse error",n.updateValue(Number.NaN);else n.popupMessage="Error "+t.status,n.updateValue(Number.NaN)}})}var t=function(){function n(){var n=new pvMapper.Module({id:"SolarmapperModule",author:"Scott Brown, INL",version:"0.1.ts",activate:function(){u()},deactivate:function(){f()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Land Management",description:"Checks solarmapper.anl.gov for intersecting land management polygons",category:"Land Use",onScoreAdded:function(){},onSiteChange:function(n,t){e(t)},scoreUtilityOptions:{functionName:"linear3pt",functionArgs:{p0:{x:0,y:1},p1:{x:1,y:.6},p2:{x:5,y:0}}},defaultWeight:10}],infoTools:null})}return n}(),o=new t,i="http://solarmapper.anl.gov/ArcGIS/rest/services/PV_Mapper_SDE/MapServer/",r="http://solarmapper.anl.gov/ArcGIS/services/PV_Mapper_SDE/MapServer/WMSServer",n})(INLModules||(INLModules={}))
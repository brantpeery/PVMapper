var INLModules;(function(n){var u=function(){function n(){var n=this,t;this.federalLandsWmsUrl="http://dingo.gapanalysisprogram.com/ArcGIS/services/NAT_LC/1_NVC_class_landuse/MapServer/WMSServer",this.federalLandsRestUrl="http://dingo.gapanalysisprogram.com/ArcGIS/rest/services/NAT_LC/1_NVC_class_landuse/MapServer/",this.landBounds=new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34),t=new pvMapper.Module({id:"FederalLandsModule",author:"Leng Vang, INL",version:"0.1.ts",activate:function(){n.addFederalLandsMap()},deactivate:function(){n.removeFederalLandsMap()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Protected Areas",description:"Display Federal Lands use boundaries.",onScoreAdded:function(){},onSiteChange:function(n,t){this.updateScoreFederalLand(t)},updateScoreCallback:function(t){n.updateScoreFederalLand(t)}}],infoTools:null})}return n.prototype.addFederalLandsMap=function(){this.federalLandsLayer=new OpenLayers.Layer.WMS("Protected Areas",this.federalLandsWmsUrl,{maxExtent:this.landBounds,layers:"0,1,2",layer_type:"polygon",transparent:"true",format:"image/gif",exceptions:"application/vnd.ogc.se_inimage",maxResolution:156543.0339,srs:"EPSG:102113"},{isBaseLayer:!1}),this.federalLandsLayer.epsgOverride="EPSG:102113",this.federalLandsLayer.setOpacity(.3),this.federalLandsLayer.setVisibility(!1),pvMapper.map.addLayer(this.federalLandsLayer)},n.prototype.removeFederalLandsMap=function(){pvMapper.map.removeLayer(this.federalLandsLayer,!1)},n.prototype.updateScoreFederalLand=function(n){var t={mapExtent:n.site.geometry.bounds.toBBOX(6,!1),geometryType:"esriGeometryEnvelope",geometry:n.site.geometry.bounds.toBBOX(6,!1),f:"json",layers:"0,1,2",tolerance:0,imageDisplay:"1, 1, 96",returnGeometry:!1},i=OpenLayers.Request.GET({url:this.federalLandsRestUrl+"identify",proxy:"/Proxy/proxy.ashx?",params:t,callback:function(t){var u,i,r;if(t.status===200){u=new OpenLayers.Format.JSON,u.extractAttributes=!0;var f=u.read(t.responseText),e="",o=null;for(i=0;i<f.results.length;i++)r=f.results[i].attributes.NVC_DIV,r!=o&&(o!=null&&(e+=", \n"),e+=r),o=r;n.popupMessage=e,n.updateValue(f.results.length)}else n.popupMessage="Connection error "+t.status,n.updateValue(Number.NaN)}})},n}(),f,r,e,t,o,i,s;n.FederalLandsModule=u,f=new n.FederalLandsModule,r=function(){function n(){var n=this,t,i;this.landBounds=new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34),t="http://dingo.gapanalysisprogram.com/ArcGIS/services/NAT_LC/1_NVC_class_landuse/MapServer/WMSServer",i=new pvMapper.Module({id:"CitiesTownsModule",author:"Leng Vang, INL",version:"0.1.ts",activate:function(){n.addWMSLayerMap("Cities and Towns",t,"EPSG:102113")},deactivate:function(){n.removeWMSLayerMap()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Cities and Towns",description:"Calculate score based on city boundaries.",onScoreAdded:function(){},onSiteChange:function(n,t){t.popupMessage="Cities and Towns score",t.updateValue(Number.NaN)},updateScoreCallback:function(n){n.popupMessage="Cities and Towns score",n.updateValue(1)}}],infoTools:null})}return n.prototype.addWMSLayerMap=function(n,t,i){var r=new OpenLayers.Layer.WMS(n,t,{maxExtent:this.landBounds,layers:"0",layer_type:"polygon",transparent:"true",format:"image/gif",exceptions:"application/vnd.ogc.se_inimage",maxResolution:156543.0339,srs:i},{isBaseLayer:!1});r.epsgOverride=i,r.setOpacity(.3),r.setVisibility(!1),pvMapper.map.addLayer(r),this.layerMap=r},n.prototype.removeWMSLayerMap=function(){pvMapper.map.removeLayer(this.layerMap,!1)},n}(),n.CitiesTowns=r,e=new n.CitiesTowns,t=function(){function n(){var n=this,t,i;this.landBounds=new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34),t="http://solarmapper.anl.gov/ArcGIS/rest/services/Solar_Mapper_SDE/MapServer/export",i=new pvMapper.Module({id:"SolarMapperModule",author:"Leng Vang, INL",version:"0.1.ts",activate:function(){n.addRESTLayerMap("Solar Mapper",t)},deactivate:function(){n.removeRESTLayerMap()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Solar Mapper",description:"Calculate score based on solar radiation.",onScoreAdded:function(){},onSiteChange:function(n,t){t.popupMessage="Solar radiation score",t.updateValue(Number.NaN)},updateScoreCallback:function(n){n.popupMessage="Solar radiation score",n.updateValue(1)}}],infoTools:null})}return n.prototype.addRESTLayerMap=function(n,t){var i=new OpenLayers.Layer.ArcGIS93Rest("Some layer from Solarmapper",t,{layers:"show:0",format:"gif",srs:"3857",transparent:"true"});i.epsgOverride="3857",i.setVisibility(!1),pvMapper.map.addLayer(i)},n.prototype.removeRESTLayerMap=function(){pvMapper.map.removeLayer(this.layerMap,!1)},n.prototype.updateScoreFromLayer=function(){},n}(),n.SolarMapper=t,o=new t,i=function(){function n(){var n=this,t,i;this.landBounds=new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34),t="http://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/export",i=new pvMapper.Module({id:"WorldTerrainModule",author:"Leng Vang, INL",version:"0.1.ts",activate:function(){n.addRESTLayerMap("World Terrain",t)},deactivate:function(){n.removeRESTLayerMap()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"World Terrain",description:"Calculate score based on terrain.",onScoreAdded:function(){},onSiteChange:function(){},updateScoreCallback:function(){}}],infoTools:null})}return n.prototype.addRESTLayerMap=function(n,t){var i=new OpenLayers.Layer.ArcGIS93Rest("World Terrain",t,{layers:"show:0",format:"gif",srs:"3857",transparent:"true"});i.epsgOverride="3857",i.isBaseLayer=!1,i.setVisibility(!1),pvMapper.map.addLayer(i)},n.prototype.removeRESTLayerMap=function(){pvMapper.map.removeLayer(this.layerMap,!1)},n}(),n.Worldterrain=i,s=new i})(INLModules||(INLModules={}))
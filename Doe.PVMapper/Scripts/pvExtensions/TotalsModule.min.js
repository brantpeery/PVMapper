var pvMapper;(function(n){(function(t){var i=function(){function t(){var t=new n.Module({activate:function(){},init:function(){},destroy:function(){},deactivate:function(){},author:"Brant Peery, INL",version:"0.1",id:"TOTALS_TOOLS",totalTools:[{title:"Weighted Average Score",description:"The weighted arithmetic mean of all scores for a site",category:"Totals",activate:function(){},init:function(){},destroy:function(){},deactivate:function(){},CalculateScore:function(t,i){var f=0,e=0,u,r;return t.forEach(function(n){f+=n.utility*n.tool.weight,e+=n.tool.weight}),u=f/e,r=i.feature,r.attributes.overallScore!==u&&(r.attributes.overallScore=u,r.attributes.fillColor=isNaN(u)?"":n.getColorForScore(u),r.layer&&r.layer.drawFeature(r)),{utility:u,popupMessage:"Average"}}},{title:"Lowest Score",description:"The lowest score for a site, and the name of the tool which generated that score",category:"Totals",activate:function(){},init:function(){},destroy:function(){},deactivate:function(){},CalculateScore:function(n){var t=Number.POSITIVE_INFINITY,i;return n.forEach(function(n){n.tool.weight&&typeof n.utility!="undefined"&&n.utility<t&&(t=n.utility,i=n.tool.title)}),(isNaN(t)||!isFinite(t))&&(t=NaN,i=null),{utility:t,popupMessage:i}}}],infoTools:null})}return t}();t.TotalScore=i})(n.Tools||(n.Tools={}));var t=n.Tools,i=new n.Tools.TotalScore})(pvMapper||(pvMapper={}))
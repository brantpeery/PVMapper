var pvMapper;(function(n){var t=function(){function t(){}return t.basicWindow={_xArgs:{},setup:function(t,i){function c(){Extras.getScript("https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.97/jsxgraphcore.js",function(){var n=s(e),v=n[0]==n[1]?1:(n[1]-n[0])/10,l,a;if(n[0]-=v,n[1]+=v*1.5,u=JXG.JSXGraph.initBoard("FunctionBox-body",{boundingbox:[n[0],108,n[1],-8],axis:!0,showCopyright:!1,showNavigation:!0}),h=u.create("functiongraph",function(n){var t=o(n,r._xArgs);return Math.max(0,Math.min(1,t))*100},{strokeWidth:3,strokeColor:"red"}),r._xArgs.className=="ThreePointUtilityArgs")r._xArgs.points!=undefined&&r._xArgs.points.length>0&&r._xArgs.points.forEach(function(n){var t=u.create("point",[r._xArgs[n].x,r._xArgs[n].y*100],{name:n,size:3});t.on("drag",function(){r._xArgs[n].x=t.X(),r._xArgs[n].y=t.Y()/100,u.update()})});else if(r._xArgs.className=="MinMaxUtilityArgs"){l=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3});l.on("drag",function(){r._xArgs.minValue=l.X(),u.update(),l.moveTo([l.X(),0]),f.setSource(r._xArgs)});a=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3});a.on("drag",function(){r._xArgs.maxValue=a.X(),u.update(),a.moveTo([a.X(),100]),f.setSource(r._xArgs)})}else if(r.xArgs.className=="SinusoidalUtilityArgs"){var i=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3}),c=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3}),t=u.create("point",[r._xArgs.target,50],{name:"target",size:3});i.on("drag",function(){var n=i.X();n>t.X()&&(n=t.X()),r._xArgs.minValue=n,u.update(),i.moveTo(n,i.Y())});c.on("drag",function(){var n=c.X();n<t.X()&&(n=t.X()),r._xArgs.maxValue=n,u.update(),c.moveTo(n,c.Y())});t.on("drag",function(){var n=t.X();n<i.X()&&(n=i.X()),n>c.X()&&(n=c.X()),r._xArgs.targetValue=n,u.update(),t.moveTo(n,t.Y())})}})}var e=i.functionArgs,o=n.UtilityFunctions[i.functionName].fn,s=n.UtilityFunctions[i.functionName].xBounds,r=this,u,h,f;r._xArgs=Ext.Object.merge({},e),t.removeAll(),f=Ext.create("Ext.grid.property.Grid",{source:r._xArgs,tipValue:null,viewConfig:{deferEmptyText:!1,emptyText:"<center><i>no editable fields<\/i><\/center>"},listeners:{edit:function(){u.update()},propertychange:function(){u.update()},itemmouseenter:function(n,t){this.tipValue=this.source.tips!=undefined?this.source.tips[t.internalId]:"Property "+t.internalId,this.tip.update(this.tipValue)},itemmouseleave:function(){this.tipValue=null},render:function(n){var t=this;n.tip=Ext.create("Ext.tip.ToolTip",{target:n.el,delegate:n.cellSelector,trackMouse:!0,renterTo:Ext.getBody(),listeners:{beforeshow:function(n){n.update(t.tipValue)}}})}}}),t.add(f),t.add({xtype:"panel",layout:{align:"center",pack:"center",type:"vbox"},items:{id:"FunctionBox",xtype:"panel",layout:"fit",border:!0,width:200,height:225,padding:5},listeners:{afterrender:function(){c()}}})},okhandler:function(n,t){Ext.apply(t,this._xArgs)}},t}();n.ScoreUtilityWindows=t})(pvMapper||(pvMapper={}))
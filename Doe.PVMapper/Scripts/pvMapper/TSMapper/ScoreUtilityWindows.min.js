var pvMapper;(function(n){var t=function(){function t(){}return t.basicWindow={_xArgs:{},setup:function(t,i){function c(){Extras.getScript("https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.97/jsxgraphcore.js",function(){var i=s(o),b=i[0]==i[1]?1:(i[1]-i[0])/10,y,p;i[0]-=b,i[1]+=b*1.5,u=JXG.JSXGraph.initBoard("FunctionBox-body",{boundingbox:[i[0],108,i[1],-8],axis:!0,showCopyright:!1,showNavigation:!0}),h=u.create("functiongraph",function(n){var t=f(n,r._xArgs);return Math.max(0,Math.min(1,t))*100},{strokeWidth:3,strokeColor:"red"});var n=u.getBoundingBox(),l=u.create("line",[[n[2]/2,n[1]],[n[2]/2,n[3]]],{name:n[2]/2,withLabel:!0,strokeColor:"blue",dash:2,size:1,strokeOpacity:.15}),w=f(n[2]/2,r._xArgs)*100,c=u.create("line",[[n[0],w],[n[2],w]],{name:w,withLabel:!0,strokeColor:"blue",dash:2,size:1,strokeOpacity:.15});l.on("drag",function(){u.suspendUpdate();var t=f(l.point1.X(),r._xArgs);t=Math.max(0,Math.min(1,t))*100,c.labelColor("red"),c.setLabelText(t.toFixed(2)),l.labelColor("red"),l.setLabelText(l.point1.X().toFixed(2)),c.point1.moveTo([n[0],t]),c.point2.moveTo([n[2],t]),u.unsuspendUpdate()});c.on("drag",function(){u.suspendUpdate();var t=f(l.point1.X(),r._xArgs)*100;c.point1.moveTo([n[0],t]),c.point2.moveTo([n[2],t]),u.unsuspendUpdate()});if(r._xArgs.className=="ThreePointUtilityArgs")r._xArgs.points!=undefined&&r._xArgs.points.length>0&&r._xArgs.points.forEach(function(n){var t=u.create("point",[r._xArgs[n].x,r._xArgs[n].y*100],{name:n,size:3});t.on("drag",function(){r._xArgs[n].x=t.X(),r._xArgs[n].y=t.Y()/100,u.update()})});else if(r._xArgs.className=="MinMaxUtilityArgs"){y=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3});y.on("drag",function(){r._xArgs.minValue=y.X(),u.update(),y.moveTo([y.X(),0]),e.setSource(r._xArgs)});p=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3});p.on("drag",function(){r._xArgs.maxValue=p.X(),u.update(),p.moveTo([p.X(),100]),e.setSource(r._xArgs)})}else if(r.xArgs.className=="SinusoidalUtilityArgs"){var a=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3}),v=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3}),t=u.create("point",[r._xArgs.target,50],{name:"target",size:3}),k=u.create("line",[t,[function(){return t.X()},0]],{dash:2,size:1,strokeOpacity:.15}),d=u.create("line",[t,[0,function(){return t.Y()}]],{dash:2,size:1,strokeOpacity:.15});a.on("drag",function(){var n=a.X();n>t.X()&&(n=t.X()),r._xArgs.minValue=n,u.update(),a.moveTo(n,a.Y())});v.on("drag",function(){var n=v.X();n<t.X()&&(n=t.X()),r._xArgs.maxValue=n,u.update(),v.moveTo(n,v.Y())});t.on("drag",function(){var n=t.X();n<a.X()&&(n=a.X()),n>v.X()&&(n=v.X()),r._xArgs.targetValue=n,u.update(),t.moveTo(n,t.Y())})}})}var o=i.functionArgs,f=n.UtilityFunctions[i.functionName].fn,s=n.UtilityFunctions[i.functionName].xBounds,r=this,u,h,e;r._xArgs=Ext.Object.merge({},o),t.removeAll(),e=Ext.create("Ext.grid.property.Grid",{source:r._xArgs,tipValue:null,viewConfig:{deferEmptyText:!1,emptyText:"<center><i>no editable fields<\/i><\/center>"},listeners:{edit:function(){u.update()},propertychange:function(){u.update()},itemmouseenter:function(n,t){this.tipValue=this.source.tips!=undefined?this.source.tips[t.internalId]:"Property "+t.internalId,this.tip.update(this.tipValue)},itemmouseleave:function(){this.tipValue=null},render:function(n){var t=this;n.tip=Ext.create("Ext.tip.ToolTip",{target:n.el,delegate:n.cellSelector,trackMouse:!0,renterTo:Ext.getBody(),listeners:{beforeshow:function(n){n.update(t.tipValue)}}})}}}),t.add(e),t.add({xtype:"panel",layout:{align:"center",pack:"center",type:"vbox"},items:{id:"FunctionBox",xtype:"panel",layout:"fit",border:!0,width:200,height:225,padding:5},listeners:{afterrender:function(){c()}}})},okhandler:function(n,t){Ext.apply(t,this._xArgs)}},t}();n.ScoreUtilityWindows=t})(pvMapper||(pvMapper={}))
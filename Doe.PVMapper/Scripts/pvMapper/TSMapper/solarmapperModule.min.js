var INLModules;(function(){function u(){n=new OpenLayers.Layer.ArcGIS93Rest("Land Management",t+"export",{layers:"72",format:"gif",srs:"3857",transparent:"true"},{maxExtent:[-1385e4,3675e3,-1135e4,5165e3]}),n.setOpacity(.3),n.epsgOverride="3857",n.setVisibility(!1),pvMapper.map.addLayer(n)}function f(){pvMapper.map.removeLayer(n,!1)}function i(n){if(!e.intersectsBounds(n.site.geometry.bounds)){n.popupMessage="No data for this site",n.updateValue(Number.NaN);return}var i={mapExtent:n.site.geometry.bounds.toBBOX(6,!1),geometryType:"esriGeometryEnvelope",geometry:n.site.geometry.bounds.toBBOX(6,!1),f:"json",layers:"72",tolerance:0,imageDisplay:"1, 1, 96"},r=OpenLayers.Request.GET({url:t+"identify",proxy:"/Proxy/proxy.ashx?",params:i,callback:function(t){var f,i,r,u;if(t.status===200)if(f=new OpenLayers.Format.JSON,f.extractAttributes=!0,i=f.read(t.responseText),i&&i.results)if(i.results.length>0){var e="",o=null,s=0;for(r=0;r<i.results.length;r++)u=i.results[r].layerName+": "+i.results[r].value,u!=o&&(o!=null&&(e+=", \n"),e+=u,s++),o=u;n.popupMessage=e,n.updateValue(s)}else n.popupMessage="None",n.updateValue(0);else n.popupMessage="Parse error",n.updateValue(Number.NaN);else n.popupMessage="Error "+t.status,n.updateValue(Number.NaN)}})}var r=function(){function n(){var n=new pvMapper.Module({id:"SolarmapperModule",author:"Scott Brown, INL",version:"0.1.ts",activate:function(){u()},deactivate:function(){f()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Land Management",description:"Checks solarmapper.anl.gov for intersecting land management polygons",category:"Land Use",onScoreAdded:function(){},onSiteChange:function(n,t){i(t)},updateScoreCallback:function(n){i(n)},scoreUtilityOptions:{functionName:"linear3pt",functionArgs:{p0:{x:0,y:1},p1:{x:1,y:.6},p2:{x:5,y:0}}},defaultWeight:10}],infoTools:null})}return n}(),o=new r,t="http://solarmapper.anl.gov/ArcGIS/rest/services/Solar_Mapper_SDE/MapServer/",n,e=new OpenLayers.Bounds(-1385e4,3675e3,-1135e4,5165e3)})(INLModules||(INLModules={}))
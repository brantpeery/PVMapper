var INLModules;(function(){function u(){n=new OpenLayers.Layer.ArcGIS93Rest("Land Management",t+"export",{layers:"72",format:"gif",srs:"3857",transparent:"true"},{maxExtent:[-1385e4,3675e3,-1135e4,5165e3]}),n.setOpacity(.3),n.epsgOverride="3857",n.setVisibility(!1),pvMapper.map.addLayer(n)}function f(){pvMapper.map.removeLayer(n,!1)}function i(n){if(!e.intersectsBounds(n.site.geometry.bounds)){n.popupMessage="No data for this site",n.updateValue(Number.NaN);return}var i={mapExtent:n.site.geometry.bounds.toBBOX(6,!1),geometryType:"esriGeometryEnvelope",geometry:n.site.geometry.bounds.toBBOX(6,!1),f:"json",layers:"72",tolerance:0,imageDisplay:"1, 1, 96"},r=OpenLayers.Request.GET({url:t+"identify",proxy:"/Proxy/proxy.ashx?",params:i,callback:function(t){var o,i,u,f,r,e;if(t.status===200)if(o=new OpenLayers.Format.JSON,o.extractAttributes=!0,i=o.read(t.responseText),i&&i.results)if(i.results.length>0){for(u="",f=null,r=0;r<i.results.length;r++)e=i.results[r].layerName+": "+i.results[r].value,e!=f&&(f!=null&&(u+=", \n"),u+=e),f=e;n.popupMessage=u,n.updateValue(i.results.length)}else n.popupMessage="None",n.updateValue(0);else n.popupMessage="Parse error",n.updateValue(Number.NaN);else n.popupMessage="Error "+t.status,n.updateValue(Number.NaN)}})}var r=function(){function n(){var n=new pvMapper.Module({id:"SolarmapperModule",author:"Scott Brown, INL",version:"0.1.ts",activate:function(){u()},deactivate:function(){f()},destroy:null,init:null,scoringTools:[{activate:null,deactivate:null,destroy:null,init:null,title:"Land Management",description:"Checks solarmapper.anl.gov for intersecting land management polygons",onScoreAdded:function(){},onSiteChange:function(n,t){i(t)},updateScoreCallback:function(n){i(n)}}],infoTools:null})}return n}(),o=new r,t="http://solarmapper.anl.gov/ArcGIS/rest/services/Solar_Mapper_SDE/MapServer/",n,e=new OpenLayers.Bounds(-1385e4,3675e3,-1135e4,5165e3)})(INLModules||(INLModules={}))
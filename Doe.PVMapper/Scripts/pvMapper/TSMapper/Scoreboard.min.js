var pvMapper;(function(n){var i=function(){function t(){var t=this;this.scoreLines=[],this.totalLines=[],this.isScoreLoaded=!1,this.changedEvent=new n.Event,this.scoresInvalidatedEvent=new n.Event,this.scoreLineAddedEvent=new n.Event,this.totalLineAddedEvent=new n.Event,this.tableRenderer=new n.Renderer.HTML.Table,this.self=this,this.onScoreChanged=function(n){t.updateTotals(),t.changedEvent.fire(t,n)}}return t.prototype.addLine=function(n){n.scoreChangeEvent.addHandler(this.onScoreChanged),this.scoreLines.push(n)},t.prototype.addTotalLine=function(n){n.ValueChangedEvent.addHandler(function(){}),this.totalLines.push(n),this.totalLineAddedEvent.fire(this,n)},t.prototype.updateTotals=function(){var n=this.scoreLines;this.totalLines.forEach(function(t){t.UpdateScores(n)})},t.prototype.getTableData=function(n){typeof n=="undefined"&&(n=!1);return[].concat(this.scoreLines).concat(this.totalLines)},t.prototype.onScoresInvalidated=function(){Error("Function not implemented yet!")},t}(),t;n.ScoreBoard=i,n.floatingScoreboard,n.mainScoreboard=new i,t=null,n.mainScoreboard.changedEvent.addHandler(function(){t==null?t=window.setTimeout(function(){var u,i,r;console&&console.log("Scoreboard update event(s) being processed..."),t=null,u=n.mainScoreboard,i=n.mainScoreboard.getTableData(),n.floatingScoreboard?(r=n.floatingScoreboard.down("gridpanel"),r.getSelectionModel().deselectAll(),r.store.loadRawData(i)):(n.floatingScoreboard=Ext.create("MainApp.view.ScoreboardWindow",{data:i}),n.floatingScoreboard.show())},250):(console&&console.log("Scoreboard update event safely (and efficiently) ignored."),n.ClientDB.db==null||n.mainScoreboard.isScoreLoaded||(n.mainScoreboard.scoreLines.forEach(function(n){n.loadScore()}),n.mainScoreboard.isScoreLoaded=!0))});n.onReady(function(){})})(pvMapper||(pvMapper={}))
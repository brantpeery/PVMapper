var pvMapper;(function(n){var t=function(){function t(){var t=this;this.scoreLines=[],this.changedEvent=new n.Event,this.scoresInvalidatedEvent=new n.Event,this.tableRenderer=new n.Renderer.HTML.Table,this.self=this,this.onScoreChanged=function(n){console.log("Score changed event detected by the scoreboard"),t.changedEvent.fire(t,n)}}return t.prototype.addLine=function(n){console.log("Adding scoreline "+n.name),n.scoreChangeEvent.addHandler(this.onScoreChanged),this.scoreLines.push(n)},t.prototype.removeLine=function(){throw"Function not yet implemented";},t.prototype.render=function(){var t,i,u,r;return console.log("Rendering the scorboard"),t=new n.Renderer.HTML.Table,i=t.addRow(),i.attr({"class":"header"}),i.addCell("Tool Name").attr({"class":"header"}),u=n.siteManager.getSites(),$.each(u,function(n,t){i.addCell(t.name)}),$.each(this.scoreLines,function(n,i){var r=t.addRow(),u=r.addCell(i.name);u.attr({title:i.description}),$.each(i.scores,function(n,t){isNaN(t.value)?r.addCell("<i>"+t.toString()+"<\/i>"):r.addCell(t.toString())})}),r=t.render(),console.log("Scoreboard HTML = "+r),r},t.prototype.onScoresInvalidated=function(){Error("Function not implemented yet!")},t}();n.ScoreBoard=t,n.floatingScoreboard,n.mainScoreboard=new t,n.mainScoreboard.changedEvent.addHandler(function(){var i=n.mainScoreboard,t=i.render();n.floatingScoreboard||(n.floatingScoreboard=Ext.create("MainApp.view.Window",{title:"Main Scoreboard",width:800,height:200,html:t,cls:"propertyBoard"}),n.floatingScoreboard.show()),n.floatingScoreboard.update(t),n.floatingScoreboard.show()});n.onReady(function(){n.mainScoreboard.changedEvent.fire(n.mainScoreboard,{})})})(pvMapper||(pvMapper={}))
var Ext,pvMapper;typeof Ext=="undefined"&&(Ext=new Ext),function(n){var t=function(){function t(){this.userInfos=n.userInfoStore,this.projects=n.projectStore,this.modules=null,this.scoreBoards=n.scoreBoardStore,this.tools=null,this.scores=null,n.projectStore.load(),this.getStore()}return t.prototype.insert=function(){},t.prototype.update=function(){},t.prototype.delete=function(){},t.prototype.select=function(){},t.prototype.refreshTree=function(){var i=n.treeStore;i.root.removeAll();var u=i.getRootNode(),r=n.projectStore.first(),t=Ext.create("NodeInterface",{text:r.Project_Name,cls:"menuItem",expandable:!0,leaf:!1,checked:!0,root:!0});return r.modules().each(function(n){var i=Ext.create("NodeInterface",{text:n.Tool_Name,cls:"menuItem",leaf:!0,expandable:!0,checked:!1,parentNode:t});t.appendChild(i),n.tools().each(function(n){var t=Ext.create("NodeInterface",{text:n.Tool_Name,cls:"menuItem",leaf:!0,checked:!1,parentNode:i});i.appendChild(t)})}),t},t.prototype.refreshScore=function(){n.scoreBoardStore.removeAll();var t=n.projectStore.first();t.modules().each(function(t){t.tools().each(function(t){t.scores().each(function(i){var u=i.getSiteModel(),r=Ext.create("MyApp.data.ScoreBoardModel",{Tool_ID:t.Tool_ID,Tool_Name:t.Tool_Name,Score_Value:i.Value,Score_ID:i.Score_ID,Score_Object:i});n.scoreBoardStore.insert(r)})})})},t.prototype.getStore=function(){this.projects=n.projectStore,this.modules=n.projectStore.modules(),this.tools=this.modules.tools(),this.scores=this.tools.scores()},t}();n.PVData=t,n.projectStore.load({callback:function(){var t=n.projectStore.first();t.modules().each(function(t){t.tools().each(function(t){t.scores().each(function(i){var u=i.getSiteModel(),r=Ext.create("MyApp.data.ScoreBoardModel",{Tool_ID:t.Tool_ID,Tool_Name:t.Tool_Name,Score_Value:i.Value,Score_ID:i.Score_ID,Score_Object:i});n.scoreBoardStore.insert(r)})})})}}),n.treeStore=Ext.create("Ext.data.TreeStore",{root:{text:"Root",expanded:!1,children:[]}}),Ext.define("MyApp.data.ScoreBoardModel",{extend:"Ext.data.Model",fields:[{name:"ScoreBoard_ID",type:"int"},{name:"Tool_ID",type:"int"},{name:"Tool_Name",type:"int"},{name:"Score_Value",type:"float"},{name:"Score_Object",type:"auto"}],idProperty:"ScoreBoard_ID"}),n.scoreBoardStore=Ext.create("Ext.data.Store",{model:"MyApp.data.ScoreBoardModel",autoLoad:!0,autoSave:!0,idProperty:"ScoreBoard_ID",proxy:{type:"localstorage"}}),Ext.define("SiteModel",{extend:"Ext.data.Model",fields:[{name:"Site_ID",type:"int"},{name:"Site_Name",type:"string"}],idProperty:"Site_ID",hasMany:{model:"MyApp.data.ScoreModel",name:"scores"}}),Ext.define("MyApp.data.ProjectModel",{extend:"Ext.data.Model",fields:[{name:"Project_ID",type:"int"},{name:"Project_Name",type:"string"},{name:"Module_Owner",type:"string"},],idProperty:"Project_ID",hasMany:{model:"MyApp.data.ModuleModel",name:"modules"},proxy:{type:"ajax",url:"../api/Project",reader:{type:"json",root:"data"}}}),n.projectStore=Ext.create("Ext.data.Store",{model:"MyApp.data.ProjectModel",autoLoad:!1,autoSave:!0,idProperty:"Project_ID"}),Ext.define("MyApp.data.ModuleModel",{extend:"Ext.data.Model",fields:[{name:"Module_ID",type:"int"},{name:"Module_Name",type:"string"},{name:"Module_Owner",type:"string"},],idProperty:"Module_ID",hasMany:{model:"MyApp.data.ToolModel",name:"tools"},belongsTo:"MyApp.data.ProjectModel"}),Ext.define("MyApp.data.ToolModel",{extend:"Ext.data.Model",fields:[{name:"Tool_ID",type:"int"},{name:"Tool_Name",type:"string"},{name:"Tool_Owner",type:"string"},],idProperty:"Tool_ID",hasMany:{model:"MyApp.data.ScoreModel",name:"scores"},belongsTo:"MyApp.data.ModuleModel"}),Ext.define("MyApp.data.ScoreModel",{extend:"Ext.data.Model",fields:[{name:"Score_ID",type:"int"},{name:"Score_Name",type:"string"},{name:"Value",type:"float"},{name:"Tool_ID",type:"int"},{name:"Site_ID",type:"int"}],idProperty:"Score_ID",belongsTo:["MyApp.data.ToolModel",{model:"SiteModel",associationKey:"site_score"}]}),Ext.define("MyApp.data.UserInfo",{extend:"Ext.data.Model",fields:[{name:"UserInfo_ID",type:"int"},{name:"User_ID",type:"int"},{name:"Info_Name",type:"string"},{name:"Info_Desc",type:"string"},],idProperty:"UserInfo_ID"}),n.userInfoStore=Ext.create("Ext.data.JsonStore",{model:"MyApp.data.UserInfo",autoLoad:!0,autoSave:!0,idProperty:"UserInfo_ID",proxy:{type:"ajax",url:"../api/UserInfo"}})}(pvMapper||(pvMapper={}))
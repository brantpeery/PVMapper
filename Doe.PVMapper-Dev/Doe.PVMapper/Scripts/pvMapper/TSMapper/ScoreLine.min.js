var pvMapper;(function(n){var t=function(){function t(t){this.scores=[],this.getvalue=t.calculateValueCallback,this.scoreAddedEvent=new n.Event,this.scoreChangeEvent=new n.Event,this.updatingScoresEvent=new n.Event,this.self=this,this.name=typeof t.title=="string"?t.title:"Unnamed Tool",this.description=typeof t.description=="string"?t.description:"Unname Tool",$.isFunction(t.onSiteChange)&&(this.onSiteChangeHandler=t.onSiteChange),$.isFunction(t.onScoreAdded)&&this.scoreAddedEvent.addHandler(t.onScoreAdded),n.siteManager.siteAdded.addHandler(this.onSiteAdded),n.siteManager.siteRemoved.addHandler(this.onSiteRemove),this.loadAllSites()}return t.prototype.getUtilityScore=function(){return 0},t.prototype.getWeight=function(){return 0},t.prototype.getWeightedUtilityScore=function(){return 0},t.prototype.addScore=function(t){console.log("Adding new score to scoreline");var i=new n.Score(t);return i.siteChangeEvent.addHandler(this.onSiteChangeHandler),i.valueChangeEvent.addHandler(this.valueChangeHandler),this.self.scores.push(i),i},t.prototype.removeScore=function(){},t.prototype.updateScores=function(){},t.prototype.valueChangeHandler=function(n){this.scoreChangeEvent.fire(self,n)},t.prototype.loadAllSites=function(){var t=n.siteManager.getSites();$.each(t,function(n,t){this.addScore(t)})},t.prototype.onSiteRemove=function(t){console.log("Attempting to remove a site/score from the scoreline"),t.data instanceof n.Site&&this.self.removeScore(t.data)},t.prototype.onSiteAdded=function(t){t.data instanceof n.Site&&this.addScore(t.data),console.log("Siteadded event detected in scoreline")},t}();n.ScoreLine=t})(pvMapper||(pvMapper={}))
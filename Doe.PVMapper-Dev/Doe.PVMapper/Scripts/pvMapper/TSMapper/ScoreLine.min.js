var pvMapper;(function(n){var t=function(){function t(t){this.scores=[],this.getvalue=t.calculateValueCallback,this.scoreAddedEvent=new n.Event,this.scoreChangeEvent=new n.Event,this.updatingScoresEvent=new n.Event,this.siteChangeHandler=new n.Event,this.self=this,this.name=typeof t.title=="string"?t.title:"Unnamed Tool",this.description=typeof t.description=="string"?t.description:"Unname Tool",this.siteChangeHandler.addHandler($.isFunction(t.onSiteChange)?t.onSiteChange:null),$.isFunction(t.onScoreAdded)&&this.scoreAddedEvent.addHandler(t.onScoreAdded),n.siteManager.siteAdded.addHandler(this.onSiteAdded),n.siteManager.siteRemoved.addHandler(this.onSiteRemove),this.loadAllSites()}return t.prototype.getUtilityScore=function(){return 0},t.prototype.getWeight=function(){return 0},t.prototype.getWeightedUtilityScore=function(){return 0},t.prototype.addScore=function(t){var i=new n.Score(t);return i.siteChangeEvent.addHandler(this.siteChangeHandler),i.valueChangeEvent.addHandler(this.valueChangeHandler),this.self.scores.push(i),i},t.prototype.removeScore=function(){},t.prototype.valueChangeHandler=function(n){this.scoreChangeEvent.fire(self,n)},t.prototype.updateScore=function(){},t.prototype.onSiteRemove=function(t){t.data instanceof n.Site&&this.self.removeScore(t.data)},t.prototype.onSiteAdded=function(t){t.data instanceof n.Site&&this.self.addScore(t.data)},t.prototype.onSiteUpdated=function(t){t.data instanceof n.Site&&this.self.updateScore(t.data)},t.prototype.loadAllSites=function(){var t=n.siteManager.getSites();$.each(t,function(n,t){this.addScore(t)})},t}();n.ScoreLine=t})(pvMapper||(pvMapper={}))
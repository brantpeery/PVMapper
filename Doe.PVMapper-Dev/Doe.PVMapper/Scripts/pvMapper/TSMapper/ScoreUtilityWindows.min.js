var pvMapper;(function(n){var t=function(){function t(){}return t.basicWindow={_xArgs:{},setup:function(t,i){function c(){Extras.getScript("https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.97/jsxgraphcore.js",function(){var t=s(e),y=t[0]==t[1]?1:(t[1]-t[0])/10,i,c,v;if(t[0]-=y,t[1]+=y*1.5,u=JXG.JSXGraph.initBoard("FunctionBox-body",{boundingbox:[t[0],108,t[1],-8],axis:!0,showCopyright:!1,showNavigation:!0}),h=u.create("functiongraph",function(n){var t=o(n,r._xArgs);return Math.max(0,Math.min(1,t))*100},{strokeWidth:3,strokeColor:"red"}),r._xArgs.className=="ThreePointUtilityArgs")r._xArgs.points!=undefined&&r._xArgs.points.length>0&&r._xArgs.points.forEach(function(n){var t=u.create("point",[r._xArgs[n].x,r._xArgs[n].y*100],{name:n,size:3}),i=u.create("line",[t,[function(){return t.X()},0]],{dash:2,size:1,strokeOpacity:.15}),f=u.create("line",[t,[0,function(){return t.Y()}]],{dash:2,size:1,strokeOpacity:.15});t.on("drag",function(){r._xArgs[n].x=t.X(),r._xArgs[n].y=t.Y()/100,u.update()})});else if(r._xArgs.className=="MinMaxUtilityArgs"){i=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3}),v=u.create("line",[i,[function(){return i.X()},10]],{dash:2,size:1,strokeOpacity:.15});i.on("drag",function(){r._xArgs.minValue=i.X(),u.update(),i.moveTo([i.X(),0]),f.setSource(r._xArgs)});c=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3}),v=u.create("line",[c,[function(){return c.X()},10]],{dash:2,size:1,strokeOpacity:.15});c.on("drag",function(){r._xArgs.maxValue=c.X(),u.update(),c.moveTo([c.X(),100]),f.setSource(r._xArgs)})}else if(r.xArgs.className=="SinusoidalUtilityArgs"){var l=u.create("point",[r._xArgs.minValue,0],{name:"Min",size:3}),a=u.create("point",[r._xArgs.maxValue,100],{name:"Max",size:3}),n=u.create("point",[r._xArgs.target,50],{name:"target",size:3}),v=u.create("line",[n,[function(){return n.X()},0]],{dash:2,size:1,strokeOpacity:.15}),p=u.create("line",[n,[0,function(){return n.Y()}]],{dash:2,size:1,strokeOpacity:.15});l.on("drag",function(){var t=l.X();t>n.X()&&(t=n.X()),r._xArgs.minValue=t,u.update(),l.moveTo(t,l.Y())});a.on("drag",function(){var t=a.X();t<n.X()&&(t=n.X()),r._xArgs.maxValue=t,u.update(),a.moveTo(t,a.Y())});n.on("drag",function(){var t=n.X();t<l.X()&&(t=l.X()),t>a.X()&&(t=a.X()),r._xArgs.targetValue=t,u.update(),n.moveTo(t,n.Y())})}})}var e=i.functionArgs,o=n.UtilityFunctions[i.functionName].fn,s=n.UtilityFunctions[i.functionName].xBounds,r=this,u,h,f;r._xArgs=Ext.Object.merge({},e),t.removeAll(),f=Ext.create("Ext.grid.property.Grid",{source:r._xArgs,tipValue:null,viewConfig:{deferEmptyText:!1,emptyText:"<center><i>no editable fields<\/i><\/center>"},listeners:{edit:function(){u.update()},propertychange:function(){u.update()},itemmouseenter:function(n,t){this.tipValue=this.source.tips!=undefined?this.source.tips[t.internalId]:"Property "+t.internalId,this.tip.update(this.tipValue)},itemmouseleave:function(){this.tipValue=null},render:function(n){var t=this;n.tip=Ext.create("Ext.tip.ToolTip",{target:n.el,delegate:n.cellSelector,trackMouse:!0,renterTo:Ext.getBody(),listeners:{beforeshow:function(n){n.update(t.tipValue)}}})}}}),t.add(f),t.add({xtype:"panel",layout:{align:"center",pack:"center",type:"vbox"},items:{id:"FunctionBox",xtype:"panel",layout:"fit",border:!0,width:200,height:225,padding:5},listeners:{afterrender:function(){c()}}})},okhandler:function(n,t){Ext.apply(t,this._xArgs)}},t}();n.ScoreUtilityWindows=t})(pvMapper||(pvMapper={}))
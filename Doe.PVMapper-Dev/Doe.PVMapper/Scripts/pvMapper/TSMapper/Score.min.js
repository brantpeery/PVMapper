var pvMapper;(function(n){var t=function(){function t(t){if(this.valueChangeEvent=new n.Event,this.invalidateEvent=new n.Event,this.siteChangeEvent=new n.Event,!t instanceof n.Site)throw"Parameter 'site' is not a pvMapper.Site object";this.self=this,this.myvalue="",this.site=t,this.popupMessage=null,this.site.changeEvent.addHandler(this.onSiteChanged)}return t.prototype.calculateUtility=function(n){return typeof n!="undefined"?this.updateValue(n):this.myvalue},t.prototype.updateValue=function(t){var i=this.myvalue;return this.myvalue=t,n.displayMessage(this.myvalue,"Info"),this.valueChangeEvent.fire(this.self,{oldvalue:i,newvalue:t}),this.myvalue},t.prototype.onSiteChanged=function(n){n.data=this.self,console.log("The score "+this.self.name+" has detected a site change pvMapper.Event.fire its own event now."),this.siteChangeEvent.fire(this.self,[n,this.self])},t.prototype.toString=function(){return this.popupMessage&&this.popupMessage.trim().length>0?this.popupMessage:this.value},t}();n.Score=t})(pvMapper||(pvMapper={}))